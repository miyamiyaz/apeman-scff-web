/**
 * Configuration file for apeman projects.
 * @see https://github.com/apeman-labo/apeman
 */

"use strict";

module.exports = {
    /** Current working directory path */
    get $cwd() {
        return __dirname;
    },
    /** Parent Apemanfile. */
    get $parent() {
        return require('../../Apemanfile.js');
    },
    /**
     * apeman tmpl configurations.
     * @see https://github.com/apeman-labo/apeman-tmpl
     */
    get $tmpls() {
        var scss = require('apeman-tmpl-scss');
        return {
            'src/scss/variables/size.scss': scss({type: 'size'}),
            'src/scss/variables/color.scss': scss({type: 'color'}),
            'src/scss/attributes/container.scss': scss({type: 'container'}),
            'src/scss/media/large-media.scss': scss({type: 'largeMedia'}),
            'src/scss/media/medium-media.scss': scss({type: 'mediumMedia'}),
            'src/scss/media/small-media.scss': scss({type: 'smallMedia'}),
            'src/scss/components/html.scss': scss({type: 'component', name: 'html'}),
            'src/scss/components/body.scss': scss({type: 'component', name: 'body'}),
            'src/scss/components/main.scss': scss({type: 'component', name: 'main'}),
            'src/scss/components/aside.scss': scss({type: 'component', name: 'aside'}),
            'src/scss/components/header.scss': scss({type: 'component', name: 'header'}),
            'src/scss/components/footer.scss': scss({type: 'component', name: 'footer'}),
            'src/scss/components/table.scss': scss({type: 'component', name: 'table'}),
            'src/scss/ui-app.scss': scss({type: 'application'})
        }
    },
    /**
     * apeman task configurations.
     * @see https://github.com/apeman-labo/apeman-task
     */
    get $tasks() {
        var mkdir = require('apeman-task-mkdir'),
            jsx = require('apeman-task-jsx'),
            coz = require('apeman-task-coz'),
            scss = require('apeman-task-scss'),
            tmpl = require('apeman-task-tmpl'),
            symlink = require('apeman-task-symlink');
        return {
            'build': [
                'struct',
                'render',
                'compile'
            ],
            'compile': [
                'compile:scss'
            ],
            'compile:scss': scss(
                'src/scss/ui-app.scss', 'public/ui-app.css'
            ),
            'render': [
                'render:coz',
                'render:tmpl'
            ],
            'render:coz': coz([]),
            'render:tmpl': tmpl({}),
            'struct': [
                'struct:mkdir',
                'struct:symlink'
            ],
            'struct:mkdir': mkdir([
                'public',
                'src',
                'src/scss',
                'src/jsx',
                'test'
            ]),
            'struct:symlink': [
                symlink('../../asset/fonts', 'public/fonts'),
                symlink('../../asset/images', 'public/images')
            ]
        }
    },
    /**
     * apeman ui configurations.
     * @see https://github.com/apeman-labo/apeman-ui
     */
    get $ui() {
        return {}
    },
    /**
     * apeman watch configurations.
     * @see https://github.com/apeman-labo/apeman-watch
     */
    get $watches() {
        return {
            'all': [
                'scss-to-compile'
            ],
            'scss-to-compile': {
                pattern: 'src/scss/*.scss',
                action: function () {
                    console.log('scss changed!');
                }
            }
        }
    }
};


if (!module.parent) {
    // Execute this file as apeman bin.
    require('apeman').cli(process.argv);
}
